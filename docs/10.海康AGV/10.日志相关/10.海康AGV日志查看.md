---
title: AGV日志查看
date: 2023-09-15 10:23:16
permalink: /pages/ed4a55/
categories: 
  - 机器人
  - AGV
tags: 
  - 
author: 
  name: 华总
  link: https://liyao52033.github.io/
titleTag: 原创
---

## 1.常见小车日志

| **日志** | **含义(所在目录)**           | **问题匹配**                 |
| -------- | ---------------------------- | ---------------------------- |
| AGV      | 任务及状态信息(/mnt)         | 任务分解，常见告警           |
| RCD      | 运行时各类参数(/mnt)         | 前方检测到障碍物，感知库告警 |
| WPA      | wifi网络信息(/mnt)           | 平台失联，小车网络不通       |
| SLAM     | 激光数据信息(/mnt/slam_data) | slam置信度过低，无slam地图   |
| TDCL     | 上镜头不识别的图像信息       | 货码不匹配，货码无法识别     |

> **强调下日志时间:小车日志的时间是开始时间，平台日志的时间是截止时间，**
>
> **比如12:35现场发生异常，你需要找的是小车日志是时间12:
> 35之前的日志，平台日志是时间12: 35之后的日志**



##   2.登录SecureCRT     

![](https://aurora-1258839075.cos.ap-shanghai.myqcloud.com/img/202309151019953.jpeg?q-sign-algorithm=sha1&q-ak=AKIDlOsIWjolbMzQrQyRwNfoovASl088zhGh&q-sign-time=1694744399;9000000000&q-key-time=1694744399;9000000000&q-header-list=host&q-url-param-list=&q-signature=403d464c28a52b4f75fb9fe3104a4b87d5c0d22d)主机名填小车IP，点击连接，弹出输入密码，输入hiklinux

## 3.常用命令

| **命令**           | **含义**                        |      |
| ------------------ | ------------------------------- | ---- |
| ls AGV*            | 显示所有的AGV日志(其他日志同理) |      |
| sz+空格+文件名     | 下载文件                        |      |
| castor_ci-R61      | 刚生成的数据加载到SD卡中        |      |
| wpa_cli status     | 查看wifi状态                    |      |
| wpa_cli scan_r     | 查看小车搜索到的wifi信号强度    |      |
| reboot             | 重启机器人                      |      |
| cd /devinfo        | 进入配置文件目录下              |      |
| sz castor_conf.xml | 下载配置文件                    |      |

​             

## 4.AGV日志查看

### 4.1小车告警

::: tip 提示

搜索关键字ALARM_PROC可获取所有告警信息，初步判断小车

:::

告警主类型：m_type 告警子类型：s_type

告警状态：stat，1开始，0结束，code驱动器告警代码

![](https://aurora-1258839075.cos.ap-shanghai.myqcloud.com/img/202309151020501.png?q-sign-algorithm=sha1&q-ak=AKIDlOsIWjolbMzQrQyRwNfoovASl088zhGh&q-sign-time=1694744407;9000000000&q-key-time=1694744407;9000000000&q-header-list=host&q-url-param-list=&q-signature=de8930780198d45f6c2b61cceed07220b2bc3a80)

告警类型对应具体含义参照主控+规划库+分配库+运动库等告警信息

### 4.2 状态上报

搜索关键字Send up

```ABAP
Send up robotID 3137 status 2 ×145916 y59986 thea89398， podid 100011，code type:BW pod_dir90 confidence：0 tid：39585 stid：4 use_pod：0，soc 71，vel991 err：0
```



关键字含义：

> xytheta：当前小车坐标，角度单位1/000度位置单位mm
> podid：任务下发的目标货架id
> pod_id：当前实时获取到的货架id号，没扫到上报-1 code
> type：当前所在地图的地码类型 pod_dir：当前货架角度
> confidence：识别货架的confidence识别到位1否则为0 tid
> stid：平台下发的任务主类型和子类型
>
> use_pod：是否上报货架位置，该字段为1时前面上报给rcs的坐标为货架坐标否则为小车本体坐标soc71：小车当前电量
>
> vel：小车当前线速度mm/s err:slam置信度
>
> ![](https://aurora-1258839075.cos.ap-shanghai.myqcloud.com/img/202309151020019.jpeg?q-sign-algorithm=sha1&q-ak=AKIDlOsIWjolbMzQrQyRwNfoovASl088zhGh&q-sign-time=1694744427;8999999999&q-key-time=1694744427;8999999999&q-header-list=host&q-url-param-list=&q-signature=87f67d5863e29bd8e120c99c56d9bfab45206868)

### 4.3 任务处理

总体流程：

> 从收到任务到小车完成需经历以下步骤： 
>
> 任务接收：plat move req_v2recieved 
>
> 任务开始处理：New task added
>
> 任务分解：action_queue
>
> distribut：为执行到任务分解的第几步
>
> m_add_work：添加任务给运动库post
> fiinsh：运动库报完成

#### 任务处理搜索New task added 

```shell
New task added，src = 1, olat task = 50, error code = 12，tid = 253, stid = 1,action type = 33,
move type:0, castor_pos = [205557，98539, 90248], pod_dir = 168101, target_pos=
[205563, 98536, 90],
max vel = 1500, barrier level = 0, reuse word = 0, safe_dist= [0,0,0,0],obs_sens_disable = 0
Recieved CMD_POD, pod_id = 100007, pod_str = 100007, pod_act = 1,
adiust_type = 0, pod_type = 102, run_pod_dir = -90, pod_dir=0, pod_ weight = 0, pod_length = 1330,
pod_width = 1140,r_tol = 20,put_dist = 20 lift_height = 150

```



> src：任务来源，1为平台下发的任务3为小车自己产生的任务，如急停停车6为主控任务分解产生的
> 任务
>
> 其余字段应与收到任务中的字段一致，可据此判断收到任务是否被执行
>
> dist：平台下发的前后左右safe dist值配合barrier level共同生效Recieved
> CMD_POD：货架任务详细信息
>
> adjust type：0 允许货架下旋转、货架不动小车单独旋转、货架下旋转托盘
>
> pod
> type：0正方型1长方形2盲举3正方型托盘4长方形托盘100\~109对应pod_conf.xml货架列表中的第1到第10个货架cun
> pod_dir.货架运行角度999为不管pod_length/pod_width：货架长宽，slam车型使用货架列表时会替换成该值不使用货架列表时不能发0
>
> r_tol：举货架精度put_dist：放货架精度

#### 任务分解：搜索关键字action_queue 

![image-20230915104510270](https://aurora-1258839075.cos.ap-shanghai.myqcloud.com/img/202309151045423.png?q-sign-algorithm=sha1&q-ak=AKIDlOsIWjolbMzQrQyRwNfoovASl088zhGh&q-sign-time=1694745910;9000000000&q-key-time=1694745910;9000000000&q-header-list=host&q-url-param-list=&q-signature=09c875e6e7f5bafb2713ca188fa41e45742f9773)

> \[xx\]：任务分解序号，每一条代表一个动作action_queue_type：任务类型（见下表）
>
> motion cmd type：运动库命令号对应MRAMC CMD CAR TYPE
>
> work status：0空车1背货2微调根据此状态决定使用的运动参数和目标点castor
> dir：目标小车角度888000为不管
>
> pod dir：目标货架角度888000为不管
>
> ![](https://aurora-1258839075.cos.ap-shanghai.myqcloud.com/img/202309151020615.jpeg?q-sign-algorithm=sha1&q-ak=AKIDlOsIWjolbMzQrQyRwNfoovASl088zhGh&q-sign-time=1694744437;8999999999&q-key-time=1694744437;8999999999&q-header-list=host&q-url-param-list=&q-signature=dffd15be351220204cb04017a6d4c5c11ce40dd7)

#### 任务添加：搜索关键字m_add_work 

![image-20230915104700412](https://aurora-1258839075.cos.ap-shanghai.myqcloud.com/img/202309151047559.png?q-sign-algorithm=sha1&q-ak=AKIDlOsIWjolbMzQrQyRwNfoovASl088zhGh&q-sign-time=1694746020;9000000000&q-key-time=1694746020;9000000000&q-header-list=host&q-url-param-list=&q-signature=402f3b8b114e334c0ab666ccbc196c36fe15318b)

下发给运动库的任务以m_add_work开始，post finish为结束

> car cmd：小车运动号turn cmd：转盘运动号
>
> curxy dir：下发任务时当前位置
>
> tarxy dir：目标位置（不叠加货架偏差）

### 4.4 激光避障

-  激光避障：搜索关键字barrier level

- barrier level253，safe_dist生效单位为cm，生效时safe_dist为0则关闭

- barrier level252，safe_dist生效单位dm，生效时safe_dist为0则关闭

- 区域激光车型根据safe_dist和castor_conf.xml中的方案距离选择当前激光方案，两者相差超过

   600，报错。

-  轮廓激光车型直接使用平台下发的方案。


### 4.5 感知库异常

搜索关键词trig_event

感知库异常：trig event m type：14

![](https://aurora-1258839075.cos.ap-shanghai.myqcloud.com/img/202309151020439.jpeg?q-sign-algorithm=sha1&q-ak=AKIDlOsIWjolbMzQrQyRwNfoovASl088zhGh&q-sign-time=1694744442;9000000000&q-key-time=1694744442;9000000000&q-header-list=host&q-url-param-list=&q-signature=1117abdd4c990a2ae0d66c86608ecfa4b749f011)

运动库异常：trig event m type：2

![](https://aurora-1258839075.cos.ap-shanghai.myqcloud.com/img/202309151020314.jpeg?q-sign-algorithm=sha1&q-ak=AKIDlOsIWjolbMzQrQyRwNfoovASl088zhGh&q-sign-time=1694744452;9000000000&q-key-time=1694744452;9000000000&q-header-list=host&q-url-param-list=&q-signature=bc2a2b6c37af7f432b88a12d3be3bfa022cd65a0)

运动库异常：trig event m type：5

![](https://aurora-1258839075.cos.ap-shanghai.myqcloud.com/img/202309151021476.jpeg?q-sign-algorithm=sha1&q-ak=AKIDlOsIWjolbMzQrQyRwNfoovASl088zhGh&q-sign-time=1694744461;9000000000&q-key-time=1694744461;9000000000&q-header-list=host&q-url-param-list=&q-signature=a0de55874c8ce9d07a307b2825edf576af73ca4d)

把code码转化成16进制，在伺服驱动器常见告警说明中查找对应的告警码，分析故障原因。

![](https://aurora-1258839075.cos.ap-shanghai.myqcloud.com/img/202309151021091.jpeg?q-sign-algorithm=sha1&q-ak=AKIDlOsIWjolbMzQrQyRwNfoovASl088zhGh&q-sign-time=1694744466;8999999999&q-key-time=1694744466;8999999999&q-header-list=host&q-url-param-list=&q-signature=f2f18d43b6a96e844472562bcd951cbb8b01ea9e)

## 5.RCD日志查看

### 5.1 RCD日志导入

![](https://aurora-1258839075.cos.ap-shanghai.myqcloud.com/img/202309151021662.jpeg?q-sign-algorithm=sha1&q-ak=AKIDlOsIWjolbMzQrQyRwNfoovASl088zhGh&q-sign-time=1694744474;8999999999&q-key-time=1694744474;8999999999&q-header-list=host&q-url-param-list=&q-signature=bc7aaf467e69ebc2c05de37972bb5bfca4fb9a74)

### 5.2**地码及货码查看**

地码及货码查看：搜索decodeFlag（0-货码未识别；1-货码已识别），code（二维码码值)

![](https://aurora-1258839075.cos.ap-shanghai.myqcloud.com/img/202309151021673.jpeg?q-sign-algorithm=sha1&q-ak=AKIDlOsIWjolbMzQrQyRwNfoovASl088zhGh&q-sign-time=1694744478;9000000000&q-key-time=1694744478;9000000000&q-header-list=host&q-url-param-list=&q-signature=bad7dd52c49e7eef8f2393eed0d7526a7d82678c)

### 5.3 举升状态查看

搜索lifter_state，在对应状态表中查找对应的状态，分析故障原因

![](https://aurora-1258839075.cos.ap-shanghai.myqcloud.com/img/202309151021350.jpeg?q-sign-algorithm=sha1&q-ak=AKIDlOsIWjolbMzQrQyRwNfoovASl088zhGh&q-sign-time=1694744484;9000000000&q-key-time=1694744484;9000000000&q-header-list=host&q-url-param-list=&q-signature=b4cdcea9776a69ffba77a57f3b6981cf240c3040)

### 5.4 遇障状态查看

搜索mode_avoid确定那个方向遇障（55-前，56-后，57-左，58-右），在感知库中查找对应方向的遇障
信息，找到遇障那一侧的障碍物位置和障碍物来源

![img](https://aurora-1258839075.cos.ap-shanghai.myqcloud.com/img/202309151021161.gif?q-sign-algorithm=sha1&q-ak=AKIDlOsIWjolbMzQrQyRwNfoovASl088zhGh&q-sign-time=1694744487;8999999999&q-key-time=1694744487;8999999999&q-header-list=host&q-url-param-list=&q-signature=c0afc3b90444f3af22e67d82123d1bd80c71419e)

![](https://aurora-1258839075.cos.ap-shanghai.myqcloud.com/img/202309151021725.jpeg?q-sign-algorithm=sha1&q-ak=AKIDlOsIWjolbMzQrQyRwNfoovASl088zhGh&q-sign-time=1694744493;9000000000&q-key-time=1694744493;9000000000&q-header-list=host&q-url-param-list=&q-signature=9a14ca99ccf0609a4423c665691f672947ef4e38)

sens.dgb\].src=1表示激光雷达，2表示超声波，4表示单点TOF，128表示区域激光，256表示光电传感
器，2048表示双目；x，y根据左图确定障碍物位置及大小

## 6.WPA日志查看

### 6.1 信号强度查看

![](https://aurora-1258839075.cos.ap-shanghai.myqcloud.com/img/202309151021829.jpeg?q-sign-algorithm=sha1&q-ak=AKIDlOsIWjolbMzQrQyRwNfoovASl088zhGh&q-sign-time=1694744496;8999999999&q-key-time=1694744496;8999999999&q-header-list=host&q-url-param-list=&q-signature=dfc2e39c62f7bec42969b39ab4624fd756463bb7)搜索current RSSI查看当前信号强度

### 6.2 AP不能触发scan

AP进入disconnect 状态，状态机异常触发SCAN异常，需要wpa进行更新

![](https://aurora-1258839075.cos.ap-shanghai.myqcloud.com/img/202309151021207.jpeg?q-sign-algorithm=sha1&q-ak=AKIDlOsIWjolbMzQrQyRwNfoovASl088zhGh&q-sign-time=1694744499;8999999999&q-key-time=1694744499;8999999999&q-header-list=host&q-url-param-list=&q-signature=f85752c2c1a2b06460da776f819bd89673e0fca9)

### 6.3 AP收到 DEAUTH 报文解除身份认证

由于超时导致的解除身份认证---见下面认证超时分析

未认证超时，AP主动发过来的DEAUTH，解除身份认证，需要联系现场it处理

![](https://aurora-1258839075.cos.ap-shanghai.myqcloud.com/img/202309151021272.jpeg?q-sign-algorithm=sha1&q-ak=AKIDlOsIWjolbMzQrQyRwNfoovASl088zhGh&q-sign-time=1694744502;8999999999&q-key-time=1694744502;8999999999&q-header-list=host&q-url-param-list=&q-signature=b2e2e71a454a120ab368a4f11fc1f4853dd7b1c9)

### 6.4 AP拒绝连接

搜索关键 reject，对于status code值=17，意思是AP饱和。其他
status可以查下图表该类AP策略问题，需要联系现场it检查下AP。

AP侧开启了智能漫游功能/弱信号禁止接入

![](https://aurora-1258839075.cos.ap-shanghai.myqcloud.com/img/202309151021235.jpeg?q-sign-algorithm=sha1&q-ak=AKIDlOsIWjolbMzQrQyRwNfoovASl088zhGh&q-sign-time=1694744505;8999999999&q-key-time=1694744505;8999999999&q-header-list=host&q-url-param-list=&q-signature=d584c100c6864caabfebd0dfe9cd1f9f110991bd)

![](https://aurora-1258839075.cos.ap-shanghai.myqcloud.com/img/202309151021144.jpeg?q-sign-algorithm=sha1&q-ak=AKIDlOsIWjolbMzQrQyRwNfoovASl088zhGh&q-sign-time=1694744508;8999999999&q-key-time=1694744508;8999999999&q-header-list=host&q-url-param-list=&q-signature=f29ab2fb988e6b387ee70c8774a5a0d9042cb7ba)

### 6.5 同频干扰

如果信号强度很好，终端也没有漫游，但rcsret-1，考虑是否存在严重的同频干扰。

同信道其他AP的信号强度超过-50db；

同信道其他AP与所连接AP信号强度都低于50db，但相差不大；
低于-65db的干扰可以不考虑。

![](https://aurora-1258839075.cos.ap-shanghai.myqcloud.com/img/202309151021453.jpeg?q-sign-algorithm=sha1&q-ak=AKIDlOsIWjolbMzQrQyRwNfoovASl088zhGh&q-sign-time=1694744512;9000000000&q-key-time=1694744512;9000000000&q-header-list=host&q-url-param-list=&q-signature=3740a4f762a7bdd5de3c27315f6381f343f4b1d9)

## 7.规划库日志查看

### 7.1 告警信息查询

搜Oui+车号，查看报错信息，如下图所示。

![](https://aurora-1258839075.cos.ap-shanghai.myqcloud.com/img/202309151021612.jpeg?q-sign-algorithm=sha1&q-ak=AKIDlOsIWjolbMzQrQyRwNfoovASl088zhGh&q-sign-time=1694744515;9000000000&q-key-time=1694744515;9000000000&q-header-list=host&q-url-param-list=&q-signature=c23f502a5c095b08416e700e3a8096950bd41cbf)E-1122代表一级告警\-\-\-\--封锁区或货架挡住ERR2-2040代表二级告警\-\--终点被货架挡

### 7.2 车和货架尺寸查看

小车尺寸在算法日志直接搜关键字:机器人尺寸，可以查到算法收到的小车尺寸，一般撞车问题可以查看
算法收到的小车尺寸是否正确。

![](https://aurora-1258839075.cos.ap-shanghai.myqcloud.com/img/202309151021839.jpeg?q-sign-algorithm=sha1&q-ak=AKIDlOsIWjolbMzQrQyRwNfoovASl088zhGh&q-sign-time=1694744518;9000000000&q-key-time=1694744518;9000000000&q-header-list=host&q-url-param-list=&q-signature=aa077b3a8e5c811da6039d43765adab73e7aaf09)

货架尺寸在In，小车背货架 pid 1)的时候，p
w即为货架长宽，撞货架可以查看算法收到的货架尺寸是否正确。

![](https://aurora-1258839075.cos.ap-shanghai.myqcloud.com/img/202309151022877.jpeg?q-sign-algorithm=sha1&q-ak=AKIDlOsIWjolbMzQrQyRwNfoovASl088zhGh&q-sign-time=1694744522;8999999999&q-key-time=1694744522;8999999999&q-header-list=host&q-url-param-list=&q-signature=5994c31f177180344a884a39edd64a512e89b733)

### 7.3 目标任务查看

算法输出下一目标点：

Ou是算法输出给小车的下个目标点，In是算法获取到的小车的当前点左边，当这两个值一致的时候，说
明算法未给小车输出下一个坐标点，小车会显示任务空闲，如下左图3126车；框选的ou和in输出不同，
说明3126车有任务正在执行。

终点目标点：

下右图绿框框选的为rcs发下来的终点目标点，如果和当前点一致，说明rcs未发任务下来。

![](https://aurora-1258839075.cos.ap-shanghai.myqcloud.com/img/202309151022280.png?q-sign-algorithm=sha1&q-ak=AKIDlOsIWjolbMzQrQyRwNfoovASl088zhGh&q-sign-time=1694744529;9000000000&q-key-time=1694744529;9000000000&q-header-list=host&q-url-param-list=&q-signature=972089a57c7ef6aa25c8426ccc4549fede81ca29)

### 7.4 小车目标角度及状态查看

In中红框选中的o为当前机器人角度，ou中红框选中的TH90为目标角度，此时说明机器人当前点需要旋
转。

![](https://aurora-1258839075.cos.ap-shanghai.myqcloud.com/img/202309151022673.jpeg?q-sign-algorithm=sha1&q-ak=AKIDlOsIWjolbMzQrQyRwNfoovASl088zhGh&q-sign-time=1694744533;9000000000&q-key-time=1694744533;9000000000&q-header-list=host&q-url-param-list=&q-signature=e42b81526f73cf3b59ee79964a9df8625d2eccd7)

小车状态在pth货架角度后面，对应的状态见下表

![](https://aurora-1258839075.cos.ap-shanghai.myqcloud.com/img/202309151022314.jpeg?q-sign-algorithm=sha1&q-ak=AKIDlOsIWjolbMzQrQyRwNfoovASl088zhGh&q-sign-time=1694744535;8999999999&q-key-time=1694744535;8999999999&q-header-list=host&q-url-param-list=&q-signature=1b1f23ffee30dad78b78c4c1d3955bebf0fe7f39)

### 7.5 货架角度查看

输出下一目标货架角度：

Ou输出P_tht90，则为货架目标角度，In
ptho则为当前货架角度，说明货架需要旋转90度（pth t999不管货架角度）

![](https://aurora-1258839075.cos.ap-shanghai.myqcloud.com/img/202309151022202.png?q-sign-algorithm=sha1&q-ak=AKIDlOsIWjolbMzQrQyRwNfoovASl088zhGh&q-sign-time=1694744538;8999999999&q-key-time=1694744538;8999999999&q-header-list=host&q-url-param-list=&q-signature=88fa0c1b73256dc0cb0570dcc1bf23f77b8eaba7)

输入终点货架角度：

In
pid190如上图框选位置，pid1意思是背着货架，pid0代表未背着货架；后面的90代表终点目标货架角度，这个角度必须和终点的货架角度一致。如上图终点货架角度90度，那终点设置成竖向，两者相悖，
算法会报错目标点错误。（1000不管终点货架角度）

![](https://aurora-1258839075.cos.ap-shanghai.myqcloud.com/img/202309151022646.jpeg?q-sign-algorithm=sha1&q-ak=AKIDlOsIWjolbMzQrQyRwNfoovASl088zhGh&q-sign-time=1694744542;9000000000&q-key-time=1694744542;9000000000&q-header-list=host&q-url-param-list=&q-signature=1ca1282c772193cbd2bbb56cd1853e0deaeaa9b1)

### 7.6 货架类型查看

![image-20230915095221090](https://aurora-1258839075.cos.ap-shanghai.myqcloud.com/img/202309151022649.png?q-sign-algorithm=sha1&q-ak=AKIDlOsIWjolbMzQrQyRwNfoovASl088zhGh&q-sign-time=1694744545;9000000000&q-key-time=1694744545;9000000000&q-header-list=host&q-url-param-list=&q-signature=07b35ddd25a666c707a73dc5a0e9a6e861a1feac)

0代表普通货架；

1代表货架下不能旋转；

2代表短边不可入；

3不能货架下旋转又短边不可进；

4代表正方形货架；

5代表盲举

## 8.分配库日志查看

### 8.1 taskid获取

Rcs的id查看

进入服务配置界面，点击访问分析页面

> ![](https://aurora-1258839075.cos.ap-shanghai.myqcloud.com/img/202309151022628.png?q-sign-algorithm=sha1&q-ak=AKIDlOsIWjolbMzQrQyRwNfoovASl088zhGh&q-sign-time=1694744550;8999999999&q-key-time=1694744550;8999999999&q-header-list=host&q-url-param-list=&q-signature=f3e1168a0d6ec005d34440f089943aa9b0bb9638)

右上角切换到任务查询超链接

![](https://aurora-1258839075.cos.ap-shanghai.myqcloud.com/img/202309151022471.png?q-sign-algorithm=sha1&q-ak=AKIDlOsIWjolbMzQrQyRwNfoovASl088zhGh&q-sign-time=1694744553;9000000000&q-key-time=1694744553;9000000000&q-header-list=host&q-url-param-list=&q-signature=f3dd96f0c073b8128f7dbd8be01a21d80ad00386)

使用子任务编号进行搜索，taskid即为id号

![](https://aurora-1258839075.cos.ap-shanghai.myqcloud.com/img/202309151022803.jpeg?q-sign-algorithm=sha1&q-ak=AKIDlOsIWjolbMzQrQyRwNfoovASl088zhGh&q-sign-time=1694744555;8999999999&q-key-time=1694744555;8999999999&q-header-list=host&q-url-param-list=&q-signature=adfa6a893f19a47cf946018070ce00b23e4487a6)

### 8.2 告警码查看

2.  ![](https://aurora-1258839075.cos.ap-shanghai.myqcloud.com/img/202309151022627.jpeg?q-sign-algorithm=sha1&q-ak=AKIDlOsIWjolbMzQrQyRwNfoovASl088zhGh&q-sign-time=1694744559;9000000000&q-key-time=1694744559;9000000000&q-header-list=host&q-url-param-list=&q-signature=63fc092a2cefab2aa9d84e4c32cdc8fc645620b2)
    
    

## 9.RCS日志查看

### 9.1 任务报文

![](https://aurora-1258839075.cos.ap-shanghai.myqcloud.com/img/202309151022215.jpeg?q-sign-algorithm=sha1&q-ak=AKIDlOsIWjolbMzQrQyRwNfoovASl088zhGh&q-sign-time=1694744562;8999999999&q-key-time=1694744562;8999999999&q-header-list=host&q-url-param-list=&q-signature=da969ae30ff3547b644ec2f70851c4209be7dadc)

### 9.2 更新货架的信息到数据库

包含货架状态、坐标、绑定小车和绑定任务号

![](https://aurora-1258839075.cos.ap-shanghai.myqcloud.com/img/202309151022772.png?q-sign-algorithm=sha1&q-ak=AKIDlOsIWjolbMzQrQyRwNfoovASl088zhGh&q-sign-time=1694744566;8999999999&q-key-time=1694744566;8999999999&q-header-list=host&q-url-param-list=&q-signature=72d8ab05f1f6487e2f19fb9ce61dc982a7afaf6d)

### 9.3 任务输出

![](https://aurora-1258839075.cos.ap-shanghai.myqcloud.com/img/202309151022113.jpeg?q-sign-algorithm=sha1&q-ak=AKIDlOsIWjolbMzQrQyRwNfoovASl088zhGh&q-sign-time=1694744572;8999999999&q-key-time=1694744572;8999999999&q-header-list=host&q-url-param-list=&q-signature=f35b5c1248b004f3ce71f60995a69e5d4b78477f)

### 9.4 任务打断

![image-20230915104238156](https://aurora-1258839075.cos.ap-shanghai.myqcloud.com/img/202309151042282.png?q-sign-algorithm=sha1&q-ak=AKIDlOsIWjolbMzQrQyRwNfoovASl088zhGh&q-sign-time=1694745758;9000000000&q-key-time=1694745758;9000000000&q-header-list=host&q-url-param-list=&q-signature=b6965d9e664132263a4157da741e6f30aad8a482)

### 9.5 任务结束

![](https://aurora-1258839075.cos.ap-shanghai.myqcloud.com/img/202309151022513.jpeg?q-sign-algorithm=sha1&q-ak=AKIDlOsIWjolbMzQrQyRwNfoovASl088zhGh&q-sign-time=1694744577;9000000000&q-key-time=1694744577;9000000000&q-header-list=host&q-url-param-list=&q-signature=649571604638bc68effe47c8babc37028669616c)

## 10. 常见问题分析

### 10.1 不分配车

基本原因分析：

- 检查地图是否连通；

- 任务所需车型数量，是否有空闲；

- 排查流程：登录RCS_WEB，检查子任务状态；根据子任务状态，对应下表逐步排查。

![](https://aurora-1258839075.cos.ap-shanghai.myqcloud.com/img/202309151023028.png?q-sign-algorithm=sha1&q-ak=AKIDlOsIWjolbMzQrQyRwNfoovASl088zhGh&q-sign-time=1694744581;8999999999&q-key-time=1694744581;8999999999&q-header-list=host&q-url-param-list=&q-signature=bc9f4f4fc765be2231d3522d699de598620a3b43){width="5.893489720034996in"
height="2.2754166666666666in"}

### 10.2 空闲车不执行

原因分析：

- 检查任务情况：路径是否连通，有没有锁定货架，是否配置了类型。

- 检查AGV状态：是否故障，类型是否匹配，电量是否充足，有无路径，是否走偏。
- 排查流程：

​             a.  查看规划库日志，In输入信息中，rCs塞的目标点和AGV上传的当前坐标姿态。

​             如果目标点和当前点一致，说明rcs没有下发任务给算法，排查rcs日志，看任务是否上报完成。
​            如果目标点和当前点不一致，说明输入没问题，进行下一步排查。

​            b.  查看Ou输出信息，是否有错误代码。

​              有错误代码：说明规划库报错，查看对应告错原因。

​              无错误代码，输出目标点或角度机器人当前坐标或角度，查看AGV日志。

​           c.  查看AGV日志，搜索plat move_req_v2，根据时间点，看是否有搜到平台下发的任务。如果没有收                     到任务，需RCS协助排查。如果收到了任务，检查AGV的状态是否正常（需嵌入式排查）。

### 10.3 死锁

#### 10.3.1 检查系统参数配置

进入 CMS 平台中，点击"货架参数"和"AGV类型配置"，检查货架最大长宽和机器人最大长宽是否正确； 进入 CMS 平台"RCS获取能力集"，检查规划库配置的机器人行驶多保护的空间是否符合要求；

如果不符，则配置正确的尺寸，远程配置RCS，验证是否还存在死锁；如果配置正确，继续下一步骤。

#### 10.3.2 确认机器人运行空间是否足够

1.  确认机器人直行空间是否足够，若空间不足，解决措施详见"2.2
    直行空间不足"；

2.  确认机器人旋转空间是否足够，若空间不足，解决措施详见"2.3
    货架旋转空间不足"；

3.  确认机器人直行加激光空间是否足够

4.  确认机器人旋转加旋转避障半径的空间是否足够架旋转空间不足

> 直行保护空间=车体尺寸（货架尺寸）+ move error + 激光距离
>
> 旋转保护空间=车体对角线（货架对角线）+ move error + 旋转避让半径

### 10.3.3 检查地图配置是否正确

1.  确认拓扑点是否可避让；

2.  确认拓扑边是否可回退避让。

## 11.相关资料下载

[主控+规划库+分配库+运动库等告警信息](https://wwp.lanzoul.com/iAqvc0h1c88h):密码:epbk

[故障日志排查](https://wwp.lanzoul.com/iVITq0h1c86f)

